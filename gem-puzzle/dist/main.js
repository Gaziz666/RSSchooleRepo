(()=>{"use strict";function e(e,t,s,r,...o){let n=null;try{n=document.createElement(e)}catch(e){throw new Error("unable to create  HTMLElement! Give a proper tag name")}return t&&n.classList.add(...t.split(" ")),s&&Array.isArray(s)?s.forEach((e=>e&&n.appendChild(e))):s&&"object"==typeof s?n.appendChild(s):s&&"string"==typeof s&&(n.innerHTML=s),r&&r.appendChild(n),o.length&&o.forEach((([e,t])=>{""===t?n.setAttribute(t,""):e.match(/value|id|placeholder|cols|rows|autocorrect|spellcheck/)?n.setAttribute(e,t):n.dataset[e]=t})),n}class t{constructor({number:t}){this.number=t,this.chip=e("div","chip",String(t),null,["key",t])}}function s(e){const t=e.target.closest(".chip"),s=t.cloneNode(!0),r=e.clientX-t.getBoundingClientRect().left,o=e.clientY-t.getBoundingClientRect().top,n=document.querySelector(".empty");let a=null,i=null,c=!1;var l,u;function m(e){!function(e,t){s.style.left=e-s.offsetWidth/2+"px",s.style.top=t-s.offsetHeight/2+"px"}(e.pageX,e.pageY),c=!0,s.classList.add("nonvisible");const t=document.elementFromPoint(e.clientX,e.clientY);s.classList.remove("nonvisible"),t&&(a=t.closest(".empty"))}e.target.closest(".empty")||(document.body.append(s),t.classList.add("empty"),i=t,s.classList.add("dragging"),s.ondragstart=()=>!1,l=e.pageX,u=e.pageY,s.style.left=l-r+"px",s.style.top=u-o+"px",document.addEventListener("mousemove",m),s.onmouseup=()=>{if(document.removeEventListener("mousemove",m),c){if(!a||1!==Math.abs(i.style.order-a.style.order)&&4!==Math.abs(i.style.order-a.style.order))i.classList.remove("empty"),s.remove();else{const e=i.style.order,t=a.style.order;localStorage.setItem("countMovie",Number(localStorage.getItem("countMovie"))+1),document.querySelector(".counter").innerHTML=localStorage.getItem("countMovie"),i.style.order=t,a.style.order=e,i.classList.remove("empty"),s.remove()}s.onmouseup=null,c=!1}else if(1===Math.abs(i.style.order-n.style.order)||4===Math.abs(i.style.order-n.style.order)){const e=i.style.order,t=n.style.order;i.style.order=t,n.style.order=e,localStorage.setItem("countMovie",Number(localStorage.getItem("countMovie"))+1),document.querySelector(".counter").innerHTML=localStorage.getItem("countMovie"),i.classList.remove("empty"),s.remove()}else i.classList.remove("empty"),s.remove()})}const r={type:[{number:0},{number:1},{number:2},{number:3},{number:4},{number:5},{number:6},{number:7},{number:8},{number:9},{number:10},{number:11},{number:12},{number:13},{number:14},{number:15}]};function o(e,t){window.localStorage.setItem(e,JSON.stringify(t))}function n(e){return JSON.parse(window.localStorage.getItem(e))}function a(){if("yes"===localStorage.getItem("isPause"))return;const t=e("ul","menu",[e("li","list",'<span class="pause-buttons">Resume game</span>',null,["game","resume"]),e("li","list",'<span class="pause-buttons">Restart game</span>',null,["game","restart"]),e("li","list",'<span class="pause-buttons">New game</span>',null,["game","new"]),e("li","list",'<span class="pause-buttons">Save game</span>',null,["game","save"]),e("li","list",'<span class="pause-buttons">Saved game</span>',null,["game","saved"]),e("li","list",'<span class="pause-buttons">Best score</span>',null,["game","score"])]),s=e("div","popup",t);document.querySelector(".game-container").append(s),localStorage.setItem("isPause","yes");const a=e=>{const t=e.target.closest(".list").dataset.game,a=document.querySelectorAll(".chip"),i=document.querySelector(".counter"),c=localStorage.getItem("chipOrder").split(","),l=document.querySelector(".sec"),u=document.querySelector(".min");let m=0;const d=[];"resume"===t?(s.remove(),localStorage.setItem("isPause","no")):"restart"===t?(a.forEach((e=>{const t=c.indexOf(e.dataset.key);e.style.order=t})),localStorage.setItem("countMovie","0"),localStorage.setItem("isRestart","yes"),localStorage.setItem("isPause","no"),i.innerHTML=0,s.remove()):"new"===t?(s.remove(),localStorage.setItem("isPause","no"),localStorage.setItem("isRestart","yes"),localStorage.setItem("countMovie","0"),i.innerHTML=0,a.forEach((e=>e.remove())),new p(r).generateLayout(16)):"save"===t?(a.forEach((e=>{d.push(e.style.order)})),d.push(n("countMovie")),d.push(u.innerHTML,l.innerHTML),m+=1,o("save"+m,d)):"saved"===t&&(a.forEach((e=>{const t=c.indexOf(e.dataset.key);e.style.order=t})),o("countMovie",n("")),o("isRestart","yes"),o("isPause","no"),i.innerHTML=0,s.remove())};document.querySelectorAll(".pause-buttons").forEach((e=>e.addEventListener("click",a)))}class i{constructor(){this.min=0,this.sec=0,this.start=()=>{"yes"===localStorage.getItem("isRestart")&&(this.sec=0,this.min=0,localStorage.setItem("isRestart","no")),document.querySelector(".min").innerHTML=""+this.min,this.sec<10?document.querySelector(".sec").innerHTML="0"+this.sec:document.querySelector(".sec").innerHTML=this.sec,"no"===localStorage.getItem("isPause")&&(59===this.sec?(this.sec=0,this.min+=1):this.sec+=1),setTimeout(this.start,1e3)}}}const c=e("div","timer-container",[e("span","description","Time:"),e("div","timer",[e("span","min"),e("span",null,":"),e("span","sec")])]),l=e("div","counter-container",[e("span","description","Movies:"),e("span","counter","0")]),u=e("button","pause","Pause Game"),m=e("button","pause visible","Resume Game");class p{constructor(e){this.gameType=e,this.chipArr=[],this.chipOrder=[],this.min=0,this.sec=0,this.countMovies=0,this.isPause="no"}init(t){return this.header=e("header","game-header",[c,l,u,m]),this.main=e("main","main",[this.header]),this.container=e("div","game-container",null,this.main),document.body.prepend(this.main),localStorage.setItem("countMovie",0),localStorage.setItem("isPause","no"),localStorage.setItem("isRestart","no"),o("sec",0),o("min",0),(new i).start(),document.querySelector(".counter").innerHTML=localStorage.getItem("countMovie"),this}generateLayout(e){for(let s=0;s<e;s+=1)this.chipArr.push(new t(this.gameType.type[s])),0===s&&this.chipArr[s].chip.classList.add("empty");let r=1;for(;r%2>0;){r=0,this.chipArr.sort((()=>Math.random()-.5));for(let e=0;e<this.chipArr.length;e+=1){for(let t=e+1;t<this.chipArr.length;t+=1)this.chipArr[e].number>this.chipArr[t].number&&0!==this.chipArr[t].number&&(r+=1);0===this.chipArr[e].number&&(r+=Math.trunc(e/4)+1)}}this.chipArr.forEach(((e,t)=>{document.querySelector(".game-container").append(e.chip),e.chip.style.order=t,this.chipOrder.push(e.chip.dataset.key),e.chip.onmousedown=s})),localStorage.setItem("chipOrder",this.chipOrder),u.addEventListener("click",a)}}new p(r).init(4).generateLayout(16)})();